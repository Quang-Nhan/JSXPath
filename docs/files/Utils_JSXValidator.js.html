<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Utils/JSXValidator.js - JSXPath - xpath query language for JSON documents</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="JSXPath - xpath query language for JSON documents" width="117" height="52">JSXPath - xpath query language for JSON documents</h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.2.9</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/JSXAxisTokens.html">JSXAxisTokens</a></li>
                                <li><a href="../classes/JSXOperatorTokens.html">JSXOperatorTokens</a></li>
                                <li><a href="../classes/JSXPath.html">JSXPath</a></li>
                                <li><a href="../classes/JSXPathFunctions.html">JSXPathFunctions</a></li>
                                <li><a href="../classes/JSXProcessor.html">JSXProcessor</a></li>
                                <li><a href="../classes/JSXReplacer.html">JSXReplacer</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/JSXPath.html">JSXPath</a></li>
                                <li><a href="../modules/Parser.html">Parser</a></li>
                                <li><a href="../modules/Processor.html">Processor</a></li>
                                <li><a href="../modules/Tokens.html">Tokens</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: Utils/JSXValidator.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var JSXError = require(&quot;./JSXError&quot;);
var JSXUtils = require(&quot;./JSXUtils&quot;);

class JSXValidator {
	//TODO implement different kinds of errors codes
	//see https://www.w3.org/TR/xpath20
	constructor() {
		this.ErrorHandler = new JSXError();
		this.Utils = new JSXUtils();
	}
	/**
	 * Validate that the input value is a number or a node object that contains a number.
	 * Returns a subset of nodes that contains number value, or the number if the input is a number.
	 * @param  {any} 	val        	the value to be tested against
	 * @param  {string} caller      the name of the caller
	 * @param  {boolean} throwError flag to throw an error or not
	 * @return {object|number|null}
	 */
	validateNumber(val, caller, throwError) {
		if (val &amp;&amp; Array.isArray(val.value) &amp;&amp;  val.value.length &amp;&amp; val.value[0].hasOwnProperty(&quot;value&quot;) &amp;&amp; (val.value.filter((e) =&gt; this.Utils.isNumber(e.value))).length === val.value.length) { 
			return val.value;
		}
		if (Array.isArray(val) &amp;&amp; (val.filter((e) =&gt; this.Utils.isNumber(e.value))).length === val.length) {
			return val;
		}
		if (val &amp;&amp; val.hasOwnProperty(&quot;value&quot;) &amp;&amp; this.Utils.isNumber(val.value)) {
			return val.value;
		}
		if (this.Utils.isNumber(val)) {
			return val;
		}
		if (throwError) {
			this.ErrorHandler.throw(&quot;jsx002&quot;, { name: caller, type: typeof val, expectedType: &quot;number&quot;, at: &quot;JSXValidator.validateNumber&quot;});
		}
		return null;
	}

	// _areNumbers(val){
	// 	return !val.some((e) =&gt; isNaN(e) || !isFinite(e));
	// }

	validateString(val, caller, throwError) {
		if (val &amp;&amp; Array.isArray(val.value) &amp;&amp; val.value.length &amp;&amp; val.value[0].hasOwnProperty(&quot;value&quot;) &amp;&amp; (val.value.filter((e) =&gt; typeof e.value === &quot;string&quot;)).length === val.value.length) {
			return val.value;
		}
		if (Array.isArray(val) &amp;&amp; (val.filter((e) =&gt; typeof e === &quot;string&quot;)).length === val.length) {
			return val;
		}
		if (val &amp;&amp; val.hasOwnProperty(&quot;value&quot;) &amp;&amp; &quot;string&quot; === typeof val.value) {
			return val.value;
		}
		if (&quot;string&quot; === typeof val) {
			return val;
		}
		if (throwError) {
			this.ErrorHandler.throw(&quot;jsx002&quot;, { name: caller, type: typeof val, expectedType: &quot;string&quot;, at: &quot;JSXValidator.validateString&quot;});
		}
		return null;
	}

	validateBoolean(val, caller, throwError) {
		if (val &amp;&amp; Array.isArray(val.value) &amp;&amp; val.value.length &amp;&amp; val.value[0].hasOwnProperty(&quot;value&quot;)) {
			return val.value.filter((e) =&gt; typeof e.value === &quot;boolean&quot;);
		}
		if (val &amp;&amp; val.hasOwnProperty(&quot;value&quot;) &amp;&amp; &quot;boolean&quot; === typeof val.value) {
			return val.value;
		}
		if (&quot;boolean&quot; === typeof val) {
			return val;
		}
		if (throwError) {
			this.ErrorHandler.throw(&quot;jsx002&quot;, { name: caller, type: typeof val, expectedType: &quot;boolean&quot;, at: &quot;JSXValidator.validateBoolean&quot; });
		}
		return null;
	}

	validateNode(val, caller, throwError) {
		if (val &amp;&amp; Array.isArray(val.value) &amp;&amp; val.value.length &amp;&amp; val.value[0].hasOwnProperty(&quot;value&quot;)) {
			return val.value.filter((e) =&gt; e &amp;&amp; e.name &amp;&amp; e.value &amp;&amp; e.children &amp;&amp; e.parent);
		}
		if (Array.isArray(val) &amp;&amp; val.length &amp;&amp; val[0].hasOwnProperty(&quot;name&quot;) &amp;&amp; val[0].hasOwnProperty(&quot;value&quot;) &amp;&amp; val[0].hasOwnProperty(&quot;parent&quot;) &amp;&amp; val[0].hasOwnProperty(&quot;children&quot;)) {
			return val;
		}
		if (val &amp;&amp; val.hasOwnProperty(&quot;name&quot;) &amp;&amp; val.hasOwnProperty(&quot;value&quot;) &amp;&amp; val.hasOwnProperty(&quot;children&quot;) &amp;&amp; val.hasOwnProperty(&quot;parent&quot;))
			return val;
		if (throwError) {
			this.ErrorHandler.throw(&quot;jsx004&quot;, { name: caller, at: &quot;JSXValidator.validateNode&quot;});
		}
		return null;
	}

	validateObject(val, caller, throwError) {
		if (val &amp;&amp; val.hasOwnProperty(&quot;value&quot;) &amp;&amp; val.value !== null &amp;&amp; !Array.isArray(val.value) &amp;&amp; typeof val.value === &quot;object&quot;) {
			return val.value;
		}
		if (val &amp;&amp; val !== null &amp;&amp; !Array.isArray(val) &amp;&amp; typeof val === &quot;object&quot;) {
			return val;
		}
		if (throwError) {//TODO: create a new error for handling plain object
			this.ErrorHandler.throw(&quot;jsx002&quot;, { name: caller, type: typeof val, expectedType: &quot;object&quot;, at: &quot;JSXValidator.validateString&quot;});
		}
		return null;
	}

	isArray(val, caller, throwError) {
		if (val &amp;&amp; val.hasOwnProperty(&quot;value&quot;) &amp;&amp; Array.isArray(val.value)) {
			return val.value;
		}
		if (Array.isArray(val)) {
			return val;
		}
		if (throwError) {
			this.ErrorHandler.throw(&quot;jsx006&quot;, { name: caller, at: &quot;JSXValidator.isArray&quot;});
		}
		return null;
	}
}

module.exports = JSXValidator;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
