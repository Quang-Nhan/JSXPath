<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSXPath - JSXPath - xpath query language for JSON documents</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="JSXPath - xpath query language for JSON documents" width="117" height="52">JSXPath - xpath query language for JSON documents</h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.2.9</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/JSXAxisTokens.html">JSXAxisTokens</a></li>
                                <li><a href="../classes/JSXOperatorTokens.html">JSXOperatorTokens</a></li>
                                <li><a href="../classes/JSXPath.html">JSXPath</a></li>
                                <li><a href="../classes/JSXPathFunctions.html">JSXPathFunctions</a></li>
                                <li><a href="../classes/JSXProcessor.html">JSXProcessor</a></li>
                                <li><a href="../classes/JSXReplacer.html">JSXReplacer</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/JSXPath.html">JSXPath</a></li>
                                <li><a href="../modules/Parser.html">Parser</a></li>
                                <li><a href="../modules/Processor.html">Processor</a></li>
                                <li><a href="../modules/Tokens.html">Tokens</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1>JSXPath Module</h1>
<div class="box clearfix meta">


        <div class="foundat">
            Defined in: <a href="../files/JSXPath.js.html#l4"><code>JSXPath.js:4</code></a>
        </div>

</div>


<div class="box intro">
    <h1>JSXPath</h1>
<p>JSXPath is an adaptation of XPath, a querying language for XML documents, to query JSON document.
If you are already familiar with the construct of [XPath], using this should be a simple.</p>
<h3>TODO list</h3>
<p>[ ] Date Time functions
[ ] Incorporate Date Time durations into existing operators: -, +, =, != , &gt;, &gt;=, &lt;, &lt;=</p>
<h2>Contents</h2>
<ul>
<li>Home
<ul>
<li><a href="#why-jsx-path">Why JSXPath?</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#differences-amp-limitations">Differences &amp; Limitations</a></li>
<li><a href="#features">Features</a>
<ul>
<li><a href="#predicate-expressions">Predicate Expressions</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#custom-functions">Custom Functions</a></li>
<li><a href="#object-comparison">Object Comparison</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="md/AXIS.html">Axis</a></li>
<li><a href="md/FUNCTIONS.html">Functions</a></li>
<li><a href="md/NODESELECTION.html">Node Selection</a></li>
<li><a href="md/OPERATORS.html">Operators</a></li>
</ul>
<h2>Why JSXPath?</h2>
<p>IF you only require a simple retrieval of a value in an object without the need of interrigating it, eg with the json = { a: 1, b: 2}, to get the value of a, then <code>json.a</code> is enough. But if you require a more complex conditioning, sure you can write your own functions to handle it, or why not let JSXPath do that?</p>
<p>Example return the value of json.c if the sum of values json.a and json.b is equal to 3;</p>
<pre class="code prettyprint"><code class="language-js">let js = {a:1, b:2, c: &quot;pass&quot;}
//without JSXPath
function sum(pa, pb) {
if (!isNumber(pa) || isNumber(pb)) {
    throw new Error(&quot;an argument is not a number&quot;);
}
    return pa + pb;
}

function isNumber(num) {
    return !isNaN(num) &amp;&amp; isFinite(num);
}

let result = sum(js.a, js.b) === 3 ? js.c : null;
----------
// result =&gt; 'pass'

// with JSXPath
let JSXPath = require(&quot;JSXPath&quot;);
let jsxpath = new JSXPath(json);

let path = '/c[sum(/a, /b) = 3]';
let result = jsxpath.process(path);
----------
// result =&gt; 'pass';
</code></pre>
<h2>Installation</h2>
<h2>Differences &amp; Limitations</h2>
<p>There are some notable differences and limiations between xml and json that the query langauge do not support.</p>
<ul>
<li>The '@' symbol is not used in JSXPath expression since JSON only consists of key value pair. '@' in XML denotes an attribute.</li>
<li>The axis 'preceding', 'preceding-sibling', 'following', and 'following-sibling' is currently not supported. JSON is a hash map, the keys are not always returned in a particular order. (although future implentations may involve sorting the the node set and returns the relevant siblings and nodes based on this order).</li>
<li>The operator token keywords are reserved. This means that the keys in the json cannot contain the following symbols (|,/,+, -, %, *, =, &gt;, &lt;) and spaces (future implemenation may cater for this using quotes to denote a key)</li>
</ul>
<h2>Features</h2>
<h4>Node Selections, Operators, and Axes</h4>
<p>JSXPath supports most of the expressions found in xpath.</p>
<table>
<thead>
<tr>
<th>Node Selection</th>
<th>Operators</th>
<th>Axes</th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>| (todo)</td>
<td>self</td>
</tr>
<tr>
<td>.</td>
<td>+</td>
<td>ancestor</td>
</tr>
<tr>
<td>..</td>
<td>-</td>
<td>ancestor-or-self</td>
</tr>
<tr>
<td>/</td>
<td>*</td>
<td>child</td>
</tr>
<tr>
<td>//</td>
<td>div</td>
<td>descendant</td>
</tr>
<tr>
<td>*</td>
<td>=</td>
<td>descendant-or-self</td>
</tr>
<tr>
<td></td>
<td>!=</td>
<td>parent</td>
</tr>
<tr>
<td></td>
<td>&lt;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>&lt;=</td>
<td></td>
</tr>
<tr>
<td></td>
<td>&gt;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>&gt;=</td>
<td></td>
</tr>
<tr>
<td></td>
<td>or</td>
<td></td>
</tr>
<tr>
<td></td>
<td>and</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mod</td>
<td></td>
</tr>
</tbody>
</table>
<h4>Predicate Expressions</h4>
<p>Predicate expressions are used to filter out node sets based on conditions within '[' ']'.</p>
<pre class="code prettyprint"><code class="language-js">let JSXPath = require(&quot;JSXPath&quot;);

let js = {
    tic: 1,
    tac: 10,
    toe: 100,
    foo: {
        tic: 2,
        tac: 20,
        toe: 200
    }
};
let path = '/toe[/tic = 1 and /tac &gt; 9]';

let jsxpath = new JSXPath(js);
let result = jsxpath.process(path);
----------
// result =&gt; 100

let path = '//tac[.&gt;1]'
let result = jsxpath.process(path)
----------
// result =&gt; [10, 20];

let path = '/toe[/tac = 3]'
let result = jsxpath.process(path);
----------
// result =&gt; [];
</code></pre>
<ul>
<li>If the predicate expression resolved to be true, and the result is a single value, then that is returned.</li>
<li>If the predicate expression resolved to be true, and the result contains multiple values, then the returned value will be an array of values.</li>
<li>If the predicate expression resolved to false, then the returned result will be an empty array.</li>
</ul>
<h4>Variables</h4>
<p>JSXPath supports variables denoted by the '$' sign.
The process function accepts a varible object as a second argument.</p>
<pre class="code prettyprint"><code class="language-js">let JSXPath = require(&quot;JSXPath&quot;);

let js = { a: 18 };
let path = '/a + $v1 - $v2';
let vars = { $v1: 19, $v2: 20 };

let jsxpath = new JSXPath(js);
let result = jsxpath.process(path, vars);
----------
// result =&gt; 17
</code></pre>
<h4>Custom Functions</h4>
<p>Along with predefined JSXPath functions, JSXPath can also support custom functions.
The new JSXPath constructor accepts a custom function object as a second argument.</p>
<p><code>note</code> the custom function will overwrite the predefined functions if they both share the same function name.</p>
<pre class="code prettyprint"><code class="language-js">let JSXPath = require(&quot;JSXPath&quot;);
let customFunctions = {
    max: (args, validator) =&gt; {
        let max = validator.validateNumber(args[0], &quot;max()&quot;, true);
        for (let i = 1; i &lt; args.length; i++) {
            let n = validator.validateNumber(args[i], &quot;max()&quot;, true);
            if (n &gt; max) {
              max = n;
            }
        }
        return max;
    }
};
let js = {
    a: 1,
    b: 2,
    c: 3
};

let jsxpath = new JSXPath(js, customFunctions);
let path = 'max(/a, /b, /c)';
let result = jsxpath.process(path);
----------
// result =&gt; 3
</code></pre>
<p><em><strong>Note:</strong> the arguments passed in the function can be a number of values:</em></p>
<ul>
<li>a primitive data type (number, string, boolean, undefined, null) value,</li>
<li>a node object in the form of {parent:.., name:..., children:[...], value:...},</li>
<li>an array or a node that has a value of an array of values. TODO: relook at above and this current point.</li>
</ul>
<p>JSXPath provides a number of handy validate helper that can check if an argument is a certain dataType. If it is a valid type then it will return the value otherwise returns null. This can be accessed via the second argument in the custom function.</p>
<ul>
<li><code>validateString( val, caller, throwError )</code>
<ul>
<li>returns the value string if valid otherwise returns null or throw an error if throwError is set to true</li>
</ul>
</li>
<li><code>validateNumber( val, caller, throwError )</code>
<ul>
<li>returns the number value if valid otherwise returns null or throw an error if throwError is set to true</li>
</ul>
</li>
<li><code>validateNode( val, caller, throwError )</code>
<ul>
<li>returns the node object if valid otherwise returns null or throw an error if throwError is set to true</li>
</ul>
</li>
<li><code>validateBoolean( val, caller, throwError )</code>
<ul>
<li>returns the boolean value if valid otherwise returns null or throw an error if throwError is set to true</li>
</ul>
</li>
<li><code>validateObject( val, caller, throwError )</code>
<ul>
<li>returns the object value if valid otherwise returns null or throw an error if throwError is set to true</li>
</ul>
</li>
<li><code>isArray( val, caller, throwError )</code>
<ul>
<li>returns the array value if valid otherwise returns null or throw an error if throwError is set to true</li>
</ul>
</li>
</ul>
<p>The <code>val</code> argument can either be a primitive, array or a node object value. If it's a node object, it will look for and check against val.value in order to determine if it is a valid data type.</p>
<h4>Object Comparison</h4>
<p>JSXPath has the ability to compare pure JSON objects in the path expression.</p>
<pre class="code prettyprint"><code class="language-js">let JSXPath = require(&quot;JSXPath&quot;);
let js = {
    a: 1,
    b: {c: 2}
};
let jsxpath = new JSXPath(js);
let path = '/b = {&quot;c&quot;: 2}';
let result = jsxpath.process(path);
----------
// result =&gt; true
</code></pre>
<p>//or by using varibles to store the object;</p>
<pre class="code prettyprint"><code class="language-js">let vars = { $c: {c:2} };
let path = '/b = $c';
let result = jsxpath.process(path, vars);
----------
// result =&gt; true
</code></pre>
<p>*<strong>Note:</strong>  The json expression must be a valid json format. Only equal (=) and not equal (!=) can be used for object comparison.</p>

</div>


<div class="yui3-g">
    <div class="yui3-u-1-2">
            <p>This module provides the following classes:</p>

            <ul class="module-classes">
                <li class="module-class">
                    <a href="../classes/JSXPath.html">
                        JSXPath
                    </a>
                </li>
            </ul>
    </div>


    <div class="yui3-u-1-2">
    </div>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
